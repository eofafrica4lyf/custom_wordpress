(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-542e087e","chunk-542e087e"],{"6da8":function(t,i,n){"use strict";n.d(i,"a",(function(){return r}));n("96cf");var a=n("3b8d"),s=n("adb5");function r(t){return e.apply(this,arguments)}function e(){return e=Object(a["a"])(regeneratorRuntime.mark((function t(i){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,s["a"].post("user/verify/pin",{pin:i});case 2:return n=t.sent,t.abrupt("return",n);case 4:case"end":return t.stop()}}),t)}))),e.apply(this,arguments)}},"73f8":function(t,i,n){"use strict";n.r(i);var a=function(){var t=this,i=t.$createElement,n=t._self._c||i;return n("div",{staticClass:"modal fade",attrs:{id:"pin-modal"}},[n("div",{staticClass:"modal-dialog"},[n("div",{staticClass:"modal-content"},[n("div",{staticClass:"modal-body text-center"},[t._m(0),n("h2",{staticClass:"bolder",staticStyle:{"margin-top":"50px","font-size":"20px"}},[t._v("Input Pin to confirm Transaction")]),n("h4",{staticClass:"text-grey text-sm"},[t._v("Enter your 4 - digit PIN to confirm this transaction.")]),n("br"),n("br"),n("div",{staticClass:"mb-20"},[n("p",{directives:[{name:"show",rawName:"v-show",value:t.pinError,expression:"pinError"}],staticClass:"pin-error text-danger"},[t._v(t._s(t.errorMessage?t.errorMessage:"Your Pin is incorrect chief, please try again."))])]),n("div",{staticClass:"form-group row pin-entry-wrapper"},[n("div",{staticClass:"col-xs-3 col-sm-2 col-sm-offset-2 pin-div"},[n("div",{staticClass:"input-group"},[n("input",{ref:"first",staticClass:"form-control pin animated faster",attrs:{disabled:t.loading,type:"password",maxlength:"1",autofocus:""},on:{keyup:function(i){return t.keymonitor(1,i)}}})])]),n("div",{staticClass:"col-xs-3 col-sm-2 pin-div no-margin"},[n("div",{staticClass:"input-group"},[n("input",{ref:"second",staticClass:"form-control pin animated faster",attrs:{disabled:t.loading,type:"password",maxlength:"1"},on:{keyup:function(i){return t.keymonitor(2,i)}}})])]),n("div",{staticClass:"col-xs-3 col-sm-2 pin-div no-margin"},[n("div",{staticClass:"input-group"},[n("input",{ref:"third",staticClass:"form-control pin animated faster",attrs:{disabled:t.loading,type:"password",maxlength:"1"},on:{keyup:function(i){return t.keymonitor(3,i)}}})])]),n("div",{staticClass:"col-xs-3 col-sm-2 pin-div no-margin"},[n("div",{staticClass:"input-group"},[n("input",{ref:"fourth",staticClass:"form-control pin animated faster",attrs:{disabled:t.loading,type:"password",maxlength:"1"},on:{keyup:function(i){return t.keymonitor(4,i)}}})])])]),n("button",{staticClass:"btn btn-block btn-mine d-flex center mt-35 mb-15",attrs:{disabled:t.loading},on:{click:t.verify}},[n("i",{directives:[{name:"show",rawName:"v-show",value:t.loading,expression:"loading"}],staticClass:"fas fa-circle-notch fa-spin mr-15"}),t._v("\n          Confirm\n        ")]),n("router-link",{staticClass:"text-primary mb-10",attrs:{to:"/settings?security=true","data-togle":"modal","data-dismiss":"modal"}},[t._v("Don't Have a pin yet? Click here to set it.")]),n("div",{staticClass:"mt-20"},[n("a",{directives:[{name:"show",rawName:"v-show",value:t.containsPinDigit,expression:"containsPinDigit"}],staticClass:"text-danger",attrs:{id:"clearPin"},on:{click:function(i){return t.clearOTP()}}},[t._v("Clear")])])],1)])])])},s=[function(){var t=this,i=t.$createElement,n=t._self._c||i;return n("button",{staticClass:"btn btn-link pull-right p-0 m-0",attrs:{type:"button","data-dismiss":"modal"}},[n("i",{staticClass:"fa fa-times"})])}],r=(n("6b54"),n("1940"),n("6da8")),e=function(){return n.e("chunk-145cffda").then(n.bind(null,"6b3b"))},o={props:["openModal","confirmClick"],components:{"p-button":e},data:function(){return{pinError:!1,containsPinDigit:!1,loading:!1,errorMessage:""}},methods:{keymonitor:function(t,i){var n=i.keyCode||i.charCode;if(8==n||46==n)return this.back(t);$(".pin").removeClass("red"),$(".form-control").removeClass("shake");var a=["first","second","third","fourth"],s=a[t],r=a[t-1];t<4&&(""!==this.$refs[r].value&&this.$refs[s].focus(),this.pinError=!1);var e=this.getPin();if(4==e.toString().length)return this.btnVerify();this.containsPinDigit||(this.containsPinDigit=!0)},back:function(t){if(t-=1,!(t<0)){var i=document.querySelectorAll(".pin-entry-wrapper .pin");i[t-1]&&i[t-1].focus()}},clearOTP:function(){this.pinError=!1;var t=$(".pin");t.val(""),this.containsPinDigit=!1,t[0].focus(),$(".pin").removeClass("red")},getPin:function(){var t=this,i=["first","second","third","fourth"],n="";return i.forEach((function(i){n+=t.$refs[i].value.toString()})),n},btnVerify:function(){var t=this;if(!this.loading){var i=this.getPin();this.$store.getters.getUser.four_digit_pin;this.loading=!0,Object(r["a"])(i).then((function(i){var n=i.data.data;if(n.fail){t.pinError=!0;var a=$(".pin");a.val(""),a[0].focus(),$(".form-control").addClass("shake"),$(".pin").addClass("red")}else{t.pinError=!1,t.$emit("pin-verified");var s=$(".pin");s.val(""),$("#pin-modal").modal("hide")}})).catch((function(i){t.pinError=!0,422===i.response.data.status&&(t.errorMessage=i.response.data.data.message)})).finally((function(){t.loading=!1}))}},verify:function(){var t=this,i=this.getPin();this.$store.getters.getUser.four_digit_pin;this.loading=!1,Object(r["a"])(i).then((function(i){var n=i.data.data;if(n.fail){t.pinError=!0;var a=$(".pin");a.val(""),a[0].focus(),$(".form-control").addClass("shake"),$(".pin").addClass("red")}else{t.pinError=!1,t.$emit("pin-verified");var s=$(".pin");s.val(""),$("#pin-modal").modal("hide")}})).catch((function(i){t.pinError=!0,422===i.response.data.status&&(t.errorMessage=i.response.data.data.message)})).finally((function(){t.loading=!1}))}},mounted:function(){var t=$(".pin");t.val(""),t[0].focus()}},c=o,l=(n("d557"),n("2877")),d=Object(l["a"])(c,a,s,!1,null,"6f9dd4f1",null);i["default"]=d.exports},d435:function(t,i,n){},d557:function(t,i,n){"use strict";var a=n("d435"),s=n.n(a);s.a}}]);
//# sourceMappingURL=chunk-542e087e.09d07bfe.js.map