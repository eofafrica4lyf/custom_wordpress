(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-624cfce8"],{3976:function(t,e,a){"use strict";var n=a("f1d3"),s=a.n(n);s.a},a6cd:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"transaction-msg"},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.isAwaiting,expression:"isAwaiting"}],staticClass:"col-md-12"},[a("awaiting-payment",{attrs:{amount:t.amount}})],1),a("div",{directives:[{name:"show",rawName:"v-show",value:!t.isAwaiting,expression:"!isAwaiting"}],staticClass:"text-center mt-20 mb-20"},[a("div",{staticClass:"mb-25"},["automatic"==t.sellMeta.type?a("h1",{staticClass:"text-primary text-bold mb-20"},[t._v("\n        "+t._s("buy"==t.transaction?"Confirm your transaction":"Make payment in PM SITE")+"\n      ")]):a("h1",{staticClass:"text-primary text-bold mb-20"},[t._v("\n        Upload Perfect Money Transfer Receipts\n      ")]),"automatic"==t.sellMeta.type?a("h6",{staticClass:"mb-25"},["buy"==t.transaction?[t._v("\n          Review all the details and confirm your"),a("br"),t._v("transaction\n          below.")]:[t._v("\n          you would be redirected to perfect money website to complete\n          payment")]],2):a("h6",{staticClass:"mb-25"},[t._v("\n        Please upload the image(s) to show you have funded our Perfect Money\n        account\n      ")])]),a("div",{staticClass:"pt-25"},["buy"===t.transaction?[a("button",{staticClass:"btn btn-block btn-primary btn-patricia text-bold",attrs:{"data-toggle":"modal","data-target":"#pin-modal","data-backdrop":"static"}},[t._v("\n          Next\n        ")])]:"sell"===t.transaction&&"automatic"===t.sellMeta.type?[a("form",{attrs:{action:"https://perfectmoney.is/api/step1.asp",target:"_blank",method:"POST"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.sellData.site_account,expression:"sellData.site_account"}],attrs:{type:"hidden",name:"PAYEE_ACCOUNT"},domProps:{value:t.sellData.site_account},on:{input:function(e){e.target.composing||t.$set(t.sellData,"site_account",e.target.value)}}}),a("input",{attrs:{type:"hidden",name:"PAYEE_NAME",value:"Patricia"}}),a("input",{directives:[{name:"model",rawName:"v-model",value:t.sellData.tranx_ref,expression:"sellData.tranx_ref"}],attrs:{type:"hidden",name:"PAYMENT_ID"},domProps:{value:t.sellData.tranx_ref},on:{input:function(e){e.target.composing||t.$set(t.sellData,"tranx_ref",e.target.value)}}}),a("input",{staticClass:"amount",attrs:{type:"hidden",name:"PAYMENT_AMOUNT"},domProps:{value:t.amount.inUsd.toFixed(1)}}),a("input",{attrs:{type:"hidden",name:"PAYMENT_UNITS",value:"USD"}}),a("input",{attrs:{type:"hidden",name:"PAYMENT_BATCH_NUM",value:"<?php echo time() ?>"}}),a("input",{directives:[{name:"model",rawName:"v-model",value:t.statusURL,expression:"statusURL"}],attrs:{type:"hidden",name:"STATUS_URL"},domProps:{value:t.statusURL},on:{input:function(e){e.target.composing||(t.statusURL=e.target.value)}}}),a("input",{directives:[{name:"model",rawName:"v-model",value:t.paymentURL,expression:"paymentURL"}],attrs:{type:"hidden",name:"PAYMENT_URL"},domProps:{value:t.paymentURL},on:{input:function(e){e.target.composing||(t.paymentURL=e.target.value)}}}),a("input",{attrs:{type:"hidden",name:"PAYMENT_URL_METHOD",value:"POST"}}),a("input",{directives:[{name:"model",rawName:"v-model",value:t.cancelURL,expression:"cancelURL"}],attrs:{type:"hidden",name:"NOPAYMENT_URL"},domProps:{value:t.cancelURL},on:{input:function(e){e.target.composing||(t.cancelURL=e.target.value)}}}),a("input",{attrs:{type:"hidden",name:"SUGGESTED_MEMO",value:"selling perfectmoney to patricia"}}),a("input",{directives:[{name:"model",rawName:"v-model",value:this.$store.getters.getUser.uuid,expression:"this.$store.getters.getUser.uuid"}],attrs:{type:"hidden",name:"userid"},domProps:{value:this.$store.getters.getUser.uuid},on:{input:function(e){e.target.composing||t.$set(this.$store.getters.getUser,"uuid",e.target.value)}}}),a("input",{attrs:{type:"hidden",name:"BAGGAGE_FIELDS",value:"userid"}}),a("button",{staticClass:"btn btn-block btn-primary btn-patricia text-bold",attrs:{type:"submit",name:"PAYMENT_METHOD"},on:{click:t.confirmPayment}},[a("span",{attrs:{id:"btn-text"}},[t._v("Proceed to Payment")])])])]:[a("button",{staticClass:"btn btn-block btn-primary btn-patricia text-bold",attrs:{"data-toggle":"modal","data-target":"#upload_pm_receipts","data-backdrop":"static"}},[t._v("\n          Upload\n        ")])]],2),a("div",{staticClass:"mt-25"},[a("a",{staticClass:"btn btn-link text-danger fs-16",on:{click:function(e){return e.preventDefault(),t.$emit("reset-data")}}},[t._v("Cancel")])])])])},s=[],i=(a("8e6e"),a("456d"),a("ac6a"),a("8615"),a("75fc")),r=a("bd86"),o=a("2f62"),c=a("494b");function l(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function u(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?l(a,!0).forEach((function(e){Object(r["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):l(a).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var p=function(){return a.e("chunk-1acf966e").then(a.bind(null,"609b"))},m={name:"ConfirmTransaction",props:{transaction:{type:String,required:!0},amount:{type:Object,required:!0},sellMeta:{type:Object},sellData:{type:Object}},components:{AwaitingPayment:p},data:function(){return{isAwaiting:!1,paymentURL:"https://api.mypatricia.co/payment/perfect/success",cancelURL:"https://api.mypatricia.co/payment/perfect/cancel",statusURL:"https://api.mypatricia.co/payment/perfect/confirm",checkForPayment:"",detected:!1}},computed:u({},Object(o["c"])(["getUser"])),methods:{confirmPayment:function(){this.isAwaiting=!0,this.checkForPayment=setInterval(this.updateRate,4e3)},updateRate:function(){var t=this;Object(c["b"])(this.sellData.tranx_ref).then((function(e){if(e.data&&e.data.data.paid&&!t.detected){t.detected=!0,t.$emit("show-success",!0),clearInterval(t.checkForPayment);var a=t.getUser.wallet.actual_amount+t.amount.inNaira;t.updateWalletAmountInStore(a)}})).catch((function(t){var e;if(409!==t.response.status){var a=t.response.data;422===t.response.status?(e=[]).concat.apply(e,Object(i["a"])(Object.values(a.errors)))[0]:a.data.message}}))},updateWalletAmountInStore:function(t){var e=this.getUser;e.wallet.actual_amount=t,this.$store.dispatch("SET_USER",e),this.$cookies.set("user",e)}}},d=m,v=(a("3976"),a("2877")),b=Object(v["a"])(d,n,s,!1,null,"7b215e52",null);e["default"]=b.exports},f1d3:function(t,e,a){}}]);
//# sourceMappingURL=chunk-624cfce8.4369a40d.js.map